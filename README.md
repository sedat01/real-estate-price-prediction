# Real estate price predictor

## Overview

    This is a house price predictor. It has scraping, data cleaning, model training
    and prediction via an API capabilities. The source for the data is Immoweb, the initial
    model is trained on 15000+ houses with prices between  120 000 and 1 500 000 euros.
    
## Scraping

    The file propert_explorer_requests is configured to scan Immoweb by provinces.
    It saves separate files for every province with the data from JSON (in the script of the site)
    and the data from the HTML page (what you see when you open the ad).Selenium is used to collect
    the links and HTTP requests to open the collected links. Concurrency is implemented to save time scraping

## Data analysis 

    analyze_data file contains the steps taken to clean the collected data.
    Initial collection was 35000+ houses with 150 columns (features). Features deemed unnecessary are removed,
    houses with missing data, which can't be imputed beyond reasonable doubt are removed (for example properties
    without bedroom count or living are removed, but without number of Toilets are kept and 1 is imputed, since
    houses do have at least 1 toilet). The file collect.py serves to concatanate the separate csv files  generated by the scraper

## Model training

    Jupyter notebook is used for testing different approaches like feature
    engineering and testing different models. The model.py is the final version which contains what seemed to be
    best from the tests on the notebook. After many tests Random Forest Regressor is choosen. The encoders for
    the province and heating type and the model are saved to files

## API

    The API is realized with Flask. It is simple has only two endpoints "/" and "/predict".
    The /predict serves to predict the prices. GET request to that endpoint returns some info
    of how to use the API. POST requests are passed to the model and return prediction. There is an example of what a POST request
    must contain:

        Example JSON:</br>

        {"0":{</br>
        "kitchen_type":0,</br>
        "building_condition":0,</br>
        "certificates_primaryEnergyConsumptionLevel":250,</br>
        "bedroom_count":3,</br>
        "land_surface":200,</br>
        "outdoor_terrace_exists":1,</br>
        "specificities_SME_office_exists":0,</br>
        "wellnessEquipment_hasSwimmingPool":0,</br>
        "parking_parkingSpaceCount_indoor":0,</br>
        "parking_parkingSpaceCount_outdoor":2,</br>
        "condition_isNewlyBuilt":0,</br>
        "Number of frontages":2,</br>
        "Living area":120,</br>
        "Bathrooms":1,</br>
        "Toilets":1,</br>
        "energy_heatingType":"gas",</br>
        "Province":"East Flanders"}}</br>
        </br>
        The initial "0" is required in order to orient the data frame in the correct order
        
        
        Kitchen type can be 0,1,2,3 where 0 i unequipped, 1 - semiequiped, 2 - equiped, 3 - hyperequiped</br>
        Building condition can be 0,1,2 where 0 - needs major renovation, 1 - good or need minor things like paint, 2 - as new</br>
        Certificates_primaryEnergyConsumptionLevel is the EPC figure in kW/m2</br>
        </br>
        Energy heating type can be carbon, electric, fueloil, gas, other, pellet, solar", wood" </br>
        Province can be Antwerp,Belgian Luxembourg, Brussels, East Falnders, Flemish Brabant, Hainaut, Liege, Limburg, Namur, Waloon Brabant, West Flanders

